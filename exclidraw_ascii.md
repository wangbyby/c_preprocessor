
## 目标
将exclidraw.json 中的图形转换为ascii字符图形

例如：
将一个矩形对象转换为ascii矩形：
```json
{
  "type": "rectangle",
  "x": 0,
  "y": 0,
  "width": 100,
  "height": 100
}
```

转换为：
```
+--------+
|        |
|        |
|        |
|        |
|        |
|        |
|        |
|        |
+--------+
```

## 实现方式

用Python实现，支持简单图形和复杂大型图表的转换

## 使用方法

```bash
python exclidraw2ascii.py exclidraw.json
```

## 功能特性

### 支持的对象类型

1. **矩形 (rectangle)** - 使用 `+`, `-`, `|` 字符绘制边框
2. **圆形/椭圆 (ellipse)** - 使用 `o` 字符绘制轮廓
3. **菱形 (diamond)** - 使用 `*` 字符绘制
4. **有向线段 (arrow)** - 智能选择方向字符：
   - 水平箭头: `---->`
   - 垂直箭头: `|` 配合 `^` 或 `v`
   - 斜线箭头: `\` 或 `/` 配合方向指示符
5. **无向线段 (line)** - 智能选择字符：
   - 水平线: `-`
   - 垂直线: `|`
   - 斜线: `\` 或 `/`
6. **文本 (text)** - 直接显示文本内容，支持多行文本和容器内居中

### 智能线条绘制系统

脚本会根据线条的方向自动选择最合适的ASCII字符：

- **水平线** (相同y坐标): 使用 `-` 字符
- **垂直线** (相同x坐标): 使用 `|` 字符  
- **正斜率对角线** (左下到右上): 使用 `\` 字符
- **负斜率对角线** (左上到右下): 使用 `/` 字符

### 复杂图表处理

对于包含大量元素的复杂Exclidraw图表，脚本具有以下智能处理能力：

#### 自动区域过滤
- 当图表包含超过100个元素时，自动启用智能过滤
- 按坐标区域分组，识别元素密度最高的区域
- 优先显示主要内容区域，避免输出过于分散

#### 自适应缩放
- 基础缩放比例：10像素 = 1个ASCII字符
- 根据内容大小自动调整缩放因子
- 保持元素间的相对位置关系

#### 画布大小优化
- 默认画布：200x150字符
- 根据内容复杂度动态调整
- 确保输出内容的可读性

### 文本处理增强

- **容器绑定文本**: 自动识别绑定到矩形的文本，实现居中显示
- **多行文本支持**: 正确处理换行符 `\n`
- **文本对齐**: 支持左对齐、居中、右对齐等对齐方式

## 示例输出

### 简单图形
```
+--------+     oooooo     *
|  Text  |    o      o   * *
+--------+    o      o  *   *
              o      o   * *
               oooooo     *
```

### 复杂图表（代码分析工具示例）
```
1: int foo(int a){
2:
3:
4:    return a+1;
5: }

+--++--++--+ +--++--++--+ +--++--++--+
|  ||  ||  | |  ||  ||  | |  ||  ||  |
|  i|  n|  t |  f|  o|  o | (||  i| n|
+--++--++--+ +--++--++--+ +--++--++--+

line_info:     用二分查找，offset => line + column
file_info:     处理include后文件的映射信息
```

## 技术特点

### 坐标系统
- 支持负坐标和大范围坐标空间
- 智能坐标转换和边界计算
- 保持原始图表的空间关系

### 性能优化
- 大型图表的区域过滤算法
- 元素数量限制（最多处理100个关键元素）
- 内存友好的画布管理

### 兼容性
- 支持Exclidraw v2格式
- 兼容各种元素属性和样式
- 忽略颜色、字体等视觉属性，专注结构

## 无需关心的属性

脚本会自动忽略以下视觉属性，专注于结构转换：

1. 边框颜色 (strokeColor)
2. 填充颜色 (backgroundColor)  
3. 线条粗细 (strokeWidth)
4. 字体大小 (fontSize)
5. 透明度 (opacity)
6. 圆角设置 (roundness)

## 适用场景

- **技术文档**: 将设计图转换为文档中的ASCII图表
- **代码注释**: 在源码中嵌入结构图
- **终端显示**: 在命令行环境中展示图表
- **文本格式**: 需要纯文本格式的图表展示
